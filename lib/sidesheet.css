.sidesheet-backdrop {
	position: fixed;
	z-index: calc(var(--sheet-z-index) - 10);
	inset: 0;
}
.sidesheet-backdrop:has(+ .sidesheet.is-closed)   { background-color: transparent; }
.sidesheet-backdrop:has(+ .sidesheet.is-open)     { background-color: transparent; }
.sidesheet-backdrop:has(+ .sidesheet.is-expanded) { background-color: var(--sheet-backdrop-background-color); }
.sidesheet-backdrop:has(+ .sidesheet.is-transition) {
	transition: background-color var(--sheet-transition-duration) var(--sheet-transition-timing-function);
}

/**************************************/

.sidesheet {
	/* Runtime values */
	--__translate-x: 0px;
	--__drag-translate-x: 0px;

	position: fixed;
	z-index: var(--sheet-z-index);
	inset: 0 0 0 auto;
	width: calc(768px + var(--sheet-draggable-size));
	transform: translateX(calc(var(--__translate-x) + var(--__drag-translate-x)));
	will-change: transform;

	/* Flow */
	display: flex;
	flex-direction: row;
}
.sidesheet.is-closed   { --__translate-x: 768px; }
.sidesheet.is-open     { --__translate-x: 384px; }
.sidesheet.is-expanded { --__translate-x: max(-1 * (var(--screen-w) - 768px - var(--sheet-draggable-size)), 0px); }
.sidesheet.is-transition {
	transition: transform var(--sheet-transition-duration) var(--sheet-transition-timing-function);
}

.sidesheet > :nth-child(2) { /* .sidesheet-card */
	flex-grow: 1;
}

/**************************************/

.sidesheet-draggable {
	width: var(--sheet-draggable-size);

	/* Flow */
	display: grid;
	place-items: center;
}
.sidesheet-draggable:hover { cursor: grab; }
:root:has(.sidesheet-draggable:active) { cursor: grab; }

/**************************************/

.sidesheet-drag-indicator {
	width: var(--sheet-drag-indicator-size);
	aspect-ratio: calc(1 / var(--sheet-drag-indicator-size-aspect-ratio));
	border-radius: 1000px;
	background-color: var(--sheet-drag-indicator-background-color);
}
.sidesheet-draggable:active .sidesheet-drag-indicator {
	background-color: var(--sheet-drag-indicator-is-active-background-color);
}

/**************************************/

.sidesheet-card {
	background-color: var(--sheet-card-background-color);
	box-shadow: var(--sheet-card-box-shadow);
}

/**************************************/

.sidesheet-content {
	overflow-y: auto;
}
.sidesheet:is(.is-closed, .is-open) .sidesheet-content { width: 384px; }
.sidesheet.is-expanded .sidesheet-content { width: min(var(--screen-w) - var(--sheet-draggable-size), 768px); }
